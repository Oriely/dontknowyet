<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="primary.css">
    
</head>
<body>
    <div id="container">

    </div>  
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyDLKY35K5zzIf65TRUuDasSM4yaTpdrQ-4",
            authDomain: "slockertsen-todo.firebaseapp.com",
            databaseURL: "https://slockertsen-todo-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "slockertsen-todo",
            storageBucket: "slockertsen-todo.appspot.com",
            messagingSenderId: "453488839012",
            appId: "1:453488839012:web:566b3e350e6ccdde501271",
            measurementId: "G-RX9S9W1YRK"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>
    <script>
        
    </script>
    <script src="Model.js"></script>
    <script src="primary.js"></script>
    <script src="View.js"></script>
    <script src="Controller.js"></script>
    <script src="Misc.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" integrity="sha512-F5QTlBqZlvuBEs9LQPqc1iZv2UMxcVXezbHzomzS6Df4MZMClge/8+gXrKw2fl5ysdk4rWjR0vKS7NNkfymaBQ==" crossorigin="anonymous"></script>
    <script>

    function updateScreen() {
        // high to low
        let tod = [];
        todoHTML_low = '';
        todoHTML_med = '';
        todoHTML_high = '';

        for (let i = 0; i < model.app.todo_categories.length; i++) {
            
        db.ref('todos/').orderByChild("priority").equalTo(model.app.todo_categories[i].name).on("child_added", snapshot => {
                let s_val = snapshot.val();

                let s_key = snapshot.key;

                todoHTML_high += todoCreateHTML(s_val, s_key);
        });

        }

        // db.ref('todos/').orderByChild("priority").equalTo(1).on("child_added", snapshot => {
        //         let s_val = snapshot.val();

        //         let s_key = snapshot.key;

        //         todoHTML_high += todoCreateHTML(s_val, s_key);
        // });

        // db.ref('todos/').orderByChild("priority").equalTo(2).on("child_added", snapshot => {
        //         let s_val = snapshot.val();

        //         let s_key = snapshot.key;

        //         todoHTML_med += todoCreateHTML(s_val, s_key);

        // });
        // db.ref('todos/').orderByChild("priority").equalTo(3).on("child_added", snapshot => {
        //         let s_val = snapshot.val();

        //         let s_key = snapshot.key;

        //         todoHTML_low += todoCreateHTML(s_val, s_key);
        // });
    
        if(!model.app.on_page) {
            mainScreen();

        }
    }
    updateScreen();     
    </script>
</body>
</html>